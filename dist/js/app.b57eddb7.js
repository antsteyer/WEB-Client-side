(function(t){function e(e){for(var r,s,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)s=o[d],i[s]&&p.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"008e":function(t,e,n){},"034f":function(t,e,n){"use strict";var r=n("64a9"),i=n.n(r);i.a},"059d":function(t,e,n){"use strict";var r=n("a1cc"),i=n.n(r);i.a},2811:function(t,e,n){"use strict";var r=n("5ef9"),i=n.n(r);i.a},"5ef9":function(t,e,n){},"62a04":function(t,e,n){"use strict";var r=n("bcfe"),i=n.n(r);i.a},"64a9":function(t,e,n){},a1cc:function(t,e,n){},bcfe:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-navigation-drawer",{attrs:{app:"",clipped:""}},[n("data-list",{directives:[{name:"show",rawName:"v-show",value:t.routePath.includes("home"),expression:"routePath.includes('home')"}]}),n("recipe-list",{directives:[{name:"show",rawName:"v-show",value:t.routePath.includes("recipe"),expression:"routePath.includes('recipe')"}]})],1),n("v-toolbar",{attrs:{app:"","clipped-left":""}},[n("v-toolbar-side-icon",[n("v-icon",[t._v("fastfood")])],1),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",to:"/home"}},[t._v("Accueil")]),n("v-btn",{attrs:{flat:"",to:"/recipe"}},[t._v("Recettes")])],1)],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.aliments.length>0?n("v-layout",{attrs:{column:"","align-center":"","justify-start":"","fill-height":""}},[n("list-filters",{on:{filterListByText:t.onFilterByText,filterListByScore:t.onFilterByScore}}),t.alimentsFiltered.length>0?n("v-list",{attrs:{"two-line":""}},[t._l(t.alimentsFromPage,function(e,r){return[e?n("v-list-tile",{key:r+"tile",class:{activeItem:t.itemSelected&&t.itemSelected===e.id},on:{click:function(n){t.itemClicked(e)}}},[n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.name))]),n("v-list-tile-sub-title",[n("v-chip",[n("v-avatar",{staticClass:"white--text",attrs:{color:t.getColorFromScore(e.score)}},[t._v(t._s(t.getLetterFromScore(e.score)))]),t._v("\n              "+t._s(e.score)+"\n            ")],1)],1)],1)],1):t._e(),e&&r<t.alimentsFiltered.length-1?n("v-divider",{key:r}):t._e()]})],2):n("span",[t._v("Aucun résultat")]),t.alimentsFiltered.length>0&&t.pageCount>1?n("v-pagination",{attrs:{circle:"",length:t.pageCount,"total-visible":5},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1):n("v-layout",{attrs:{row:"","align-center":"","fill-height":"","justify-center":""}},[n("v-progress-circular",{staticClass:"progress",attrs:{indeterminate:"",color:"primary"}})],1)},o=[],l=(n("6762"),n("2fdb"),n("7f7f"),n("59ad")),c=n.n(l),u=(n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{"hide-details":"",placeholder:"Filtrer la liste..."},on:{input:t.onUserSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.filterByScore?n("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[n("v-btn-toggle",{attrs:{dark:"",mandatory:""},model:{value:t.scoreToShow,callback:function(e){t.scoreToShow=e},expression:"scoreToShow"}},[n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",dark:"",color:"grey"},slot:"activator"},[t._v("#")]),n("span",[t._v("Afficher tous")])],1),n("v-btn",{attrs:{icon:"",dark:"",color:"green"}},[t._v("A")]),n("v-btn",{attrs:{icon:"",dark:"",color:"#90EE90"}},[t._v("B")]),n("v-btn",{attrs:{icon:"",dark:"",color:"yellow"}},[t._v("C")]),n("v-btn",{attrs:{icon:"",dark:"",color:"orange"}},[t._v("D")]),n("v-btn",{attrs:{icon:"",dark:"",color:"red"}},[t._v("E")])],1)],1):t._e()],1)}),d=[],p=r["default"].extend({props:{filterByScore:{type:Boolean,default:!0}},data:function(){return{search:null,scoreToShow:0}},methods:{onUserSearch:function(t){this.$emit("filterListByText",t)}},watch:{scoreToShow:function(t){this.$emit("filterListByScore",t)}}}),h=p,f=(n("62a04"),n("2877")),v=Object(f["a"])(h,u,d,!1,null,"4b0463ee",null),m=v.exports,_=9,g=r["default"].extend({data:function(){return{aliments:[],itemSelected:null,alimentsFiltered:[],page:1}},components:{ListFilters:m},mounted:function(){this.getData()},computed:{alimentsFromPage:function(){var t=(this.page-1)*_,e=t+_;return this.alimentsFiltered.slice(t,e)},pageCount:function(){var t=this.alimentsFiltered.length,e=_;return Math.ceil(t/e)}},methods:{getData:function(){var t=this;fetch("https://web-server-client.herokuapp.com/score").then(function(t){return t.json()}).then(function(e){t.aliments=e.sort(function(t,e){var n=c()(t.score),r=c()(e.score);return n>r?1:n<r?-1:0}),t.alimentsFiltered=t.aliments})},getColorFromScore:function(t){var e=c()(t);return e<=1?"green":e>1&&e<=4?"#90EE90":e>4&&e<=6?"yellow":e>6&&e<=7?"orange":"red"},getLetterFromScore:function(t){var e=c()(t);return e<=1?"A":e>1&&e<=4?"B":e>4&&e<=6?"C":e>6&&e<=7?"D":"E"},itemClicked:function(t){this.itemSelected=t.id,this.$router.push({path:"/home/details/".concat(t.id)})},onFilterByText:function(t){this.alimentsFiltered=this.aliments.filter(function(e){return e.name&&e.name.includes(t)})},onFilterByScore:function(t){var e=this;if(0!==t){var n="";switch(t){case 1:n="A";break;case 2:n="B";break;case 3:n="C";break;case 4:n="D";break;case 5:n="E";break;default:n="A";break}this.alimentsFiltered=this.aliments.filter(function(t){return e.getLetterFromScore(t.score)===n})}else this.alimentsFiltered=this.aliments}}}),x=g,b=(n("059d"),Object(f["a"])(x,s,o,!1,null,"4c5b80ac",null)),y=b.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("v-layout",{attrs:{row:"","align-center":"","fill-height":"","justify-center":""}},[n("v-progress-circular",{staticClass:"progress",attrs:{indeterminate:"",color:"primary"}})],1):n("v-layout",{attrs:{column:"","align-center":"","justify-start":"","fill-height":""}},[n("list-filters",{attrs:{filterByScore:!1},on:{filterListByText:t.onFilterByText}}),t.recipesFiltered.length>0?n("v-list",{attrs:{"two-line":""}},[t._l(t.recipesFromPage,function(e,r){return[e?n("v-list-tile",{key:r+"tile",class:{activeItem:t.itemSelected&&t.itemSelected===e.id},on:{click:function(n){t.itemClicked(e)}}},[n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.name))])],1)],1):t._e(),e&&r<t.recipesFiltered.length-1?n("v-divider",{key:r}):t._e()]})],2):n("span",{staticClass:"noResult"},[t._v("Aucun résultat")]),t.recipesFiltered.length>0&&t.pageCount>1?n("v-pagination",{attrs:{circle:"",length:t.pageCount,"total-visible":5},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),n("v-spacer"),n("v-btn",{attrs:{to:"/recipe/newrecipe",flat:"",color:"primary"}},[t._v("Ajouter une nouvelle recette")])],1)},k=[],S=9,j=r["default"].extend({data:function(){return{loading:!1,recipes:[],itemSelected:null,recipesFiltered:[],page:1}},components:{ListFilters:m},mounted:function(){this.getData()},computed:{recipesFromPage:function(){var t=(this.page-1)*S,e=t+S;return this.recipesFiltered.slice(t,e)},pageCount:function(){var t=this.recipesFiltered.length,e=S;return Math.ceil(t/e)}},methods:{getData:function(){var t=this;this.loading=!0,fetch("https://web-server-client.herokuapp.com/getrecipe").then(function(t){return t.json()}).then(function(e){t.recipes=e.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}),t.recipesFiltered=t.recipes,t.loading=!1})},itemClicked:function(t){this.itemSelected=t.id,this.$router.push({path:"/recipe/details/".concat(t.id)})},onFilterByText:function(t){this.recipesFiltered=this.recipes.filter(function(e){return e.name&&e.name.includes(t)})}}}),F=j,C=(n("2811"),Object(f["a"])(F,w,k,!1,null,"3e2e6dac",null)),P=C.exports,E=r["default"].extend({components:{DataList:y,RecipeList:P},computed:{routePath:function(){return this.$route.path}}}),O=E,$=(n("034f"),Object(f["a"])(O,i,a,!1,null,null,null)),B=$.exports,A=n("8c4f"),N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("router-view")],1)},M=[],T=n("60a3"),L=T["a"].extend({components:{DataList:y}}),D=L,I=Object(f["a"])(D,N,M,!1,null,null,null),R=I.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.product?n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{dark:"",color:"primary"}},[n("v-card-text",{staticClass:"px-0"},[n("h1",[t._v(t._s(t.product.name))])])],1)],1),n("v-flex",{attrs:{xs6:""}},[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[t._v("Ingredients")])]),n("v-divider"),n("v-card-text",[""!==t.product.ingredients?n("p",[t._v(t._s(t.product.ingredients))]):t._e(),t.product.ingredients?t._e():n("h5",[t._v("Non renseigné...")])])],1)],1),n("v-flex",{attrs:{xs3:""}},[n("app-nutriments",{attrs:{nutriments:t.product.nutriments}})],1),n("v-flex",{attrs:{xs3:""}},[n("app-additives",{attrs:{additives:t.product.additives}})],1),n("v-flex",{attrs:{xs5:""}},[n("app-add-price",{attrs:{id:t.id}})],1),n("v-flex",{attrs:{xs7:""}},[n("app-shops",{attrs:{shops:t.product.shops}})],1)],1)],1):t._e()},U=[],z=(n("ac6a"),n("28a5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[t._v(t._s(t.nutriments.length)+" "+t._s(1===t.nutriments.length?"Nutriment":"Nutriments"))])]),n("v-divider"),n("v-card-text",[t.nutriments.length>0?n("v-list",{attrs:{dense:""}},[t._l(t.nutriments,function(e,r){return[n("v-list-tile",{key:r},[n("v-list-tile-content",[t._v(t._s(e.getName()))]),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.getValueFor100g())+" "+t._s(e.unit))])],1)]})],2):t._e(),0===t.nutriments.length?n("h5",[t._v("Non renseigné...")]):t._e()],1)],1)}),K=[],V=r["default"].component("app-nutriments",{props:["nutriments"],data:function(){return{}},mounted:function(){},computed:{},methods:{}}),J=V,G=Object(f["a"])(J,z,K,!1,null,null,null),H=G.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"additives-card"},[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[t._v("Liste des additifs")])]),n("v-divider"),n("v-card-text",[t._l(t.additives,function(e,r){return[n("v-chip",{key:r,attrs:{color:"rgba(200, 201, 233, 0.75)","text-color":"black",disabled:"",outline:""}},[t._v(t._s(t._f("capitalize")(e)))])]}),0===t.additives.length?n("h5",[t._v("Non renseigné...")]):t._e()],2)],1)},Y=[],Z=(n("6b54"),r["default"].component("app-additives",{props:["additives"],data:function(){return{}},mounted:function(){},computed:{},methods:{},filters:{capitalize:function(t){return t?(t=t.toString(),t.toUpperCase()):""}}})),Q=Z,X=Object(f["a"])(Q,W,Y,!1,null,null,null),tt=X.exports,et=n("d225"),nt=n("b0b4"),rt=function(){function t(e,n,r){Object(et["a"])(this,t),this.name=e,this.value_for_100g=n,this.unit=r}return Object(nt["a"])(t,[{key:"getName",value:function(){var t="",e=this.name.split("-");return e.forEach(function(e){t+=e+" "}),t.charAt(0).toUpperCase()+t.substring(1,t.length)}},{key:"getValueFor100g",value:function(){return Math.round(100*this.value_for_100g)/100}},{key:"getUnit",value:function(){return this.unit}}]),t}(),it=function(){function t(e,n,r,i,a){Object(et["a"])(this,t),this.name=e,this.nutriments=n,this.ingredients=r,this.additives=i,this.shops=a}return Object(nt["a"])(t,[{key:"getName",value:function(){return this.name}},{key:"getNutriments",value:function(){return this.nutriments}}]),t}(),at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[t._v("Donner un prix pour ce produit")])]),n("v-divider"),n("v-card-text",[n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",[n("v-layout",{attrs:{"align-center":"","justify-center":"",column:"","fill-height":""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:t.shop_name_rules,label:"Nom du magasin","single-line":"",outline:""},model:{value:t.shop_name,callback:function(e){t.shop_name=e},expression:"shop_name"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:t.shop_address_rules,label:"Addresse","single-line":"",outline:""},model:{value:t.shop_address,callback:function(e){t.shop_address=e},expression:"shop_address"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:t.shop_lat_rules,label:"Latitude","single-line":"",outline:"",type:"number"},model:{value:t.shop_lat,callback:function(e){t.shop_lat=e},expression:"shop_lat"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:t.shop_lon_rules,label:"Longitude","single-line":"",outline:"",type:"number"},model:{value:t.shop_lon,callback:function(e){t.shop_lon=e},expression:"shop_lon"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:t.price_rules,label:"Prix","single-line":"",outline:"",type:"number"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1),n("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[n("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[t._v("Réinitialiser")]),n("v-btn",{attrs:{disabled:!t.valid,color:"success"},on:{click:t.validate}},[t._v("Valider")])],1)],1)],1),n("v-snackbar",{attrs:{color:"success",timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("Votre prix a bien été pris en compte !\n      "),n("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Fermer")])],1)],1)],1)},st=[],ot=n("f499"),lt=n.n(ot),ct=(n("96cf"),n("3b8d")),ut=r["default"].component("app-add-price",{props:["id"],watch:{id:function(t,e){}},data:function(){return{valid:!0,shop_name:"",shop_name_rules:[function(t){return!!t||"Nom du magasin requis"}],shop_address:"",shop_address_rules:[function(t){return!!t||"Addresse requise"}],shop_lat:"",shop_lat_rules:[function(t){return!!t||"Latitude requise"}],shop_lon:"",shop_lon_rules:[function(t){return!!t||"Longitude requise"}],price:"",price_rules:[function(t){return!!t||"Prix requis"},function(t){return t&&t>0||"Le prix ne peux pas etre negatif"}],snackbar:!1}},mounted:function(){},computed:{},methods:{validate:function(){this.$refs.form.validate()?this.sendFormData():console.log("Not valid!")},reset:function(){this.$refs.form.reset()},sendFormData:function(){var t=Object(ct["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://web-server-client.herokuapp.com/addPrice",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:lt()({id:this.id,shop:{name:this.shop_name,address:this.shop_address,longitude:this.shop_lon,latitude:this.shop_lat,price:this.price}})});case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,!0===n?(this.snackbar=!0,this.reset(),this.$root.$emit("price-added-event")):console.log("Something went wrong");case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isNumber:function(t){return/^-?[\d.]+(?:e-?\d+)?$/.test(t)}}}),dt=ut,pt=Object(f["a"])(dt,at,st,!1,null,null,null),ht=pt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[t._v("Liste des magasins qui vendent ce produit")])]),n("v-divider"),n("v-card-text",[n("v-layout",{attrs:{row:"",wrap:""}},[t.shops.length>0?n("div",{staticClass:"filters"},[n("v-layout",{attrs:{"justify-start":"",column:"","fill-height":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Nom du magasin",placeholder:"Entrer le nom d'un magasin",outline:""},on:{input:t.filterByName},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-slider",{attrs:{max:100,label:"Distance (km)","thumb-label":""},on:{change:function(e){t.filterByDistance(t.shops,t.distance)}},model:{value:t.distance,callback:function(e){t.distance=e},expression:"distance"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-slider",{attrs:{max:100,label:"Prix (€)","thumb-label":""},on:{change:function(e){t.filterByPrice(t.shops,t.price)}},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1)],1):t._e(),n("v-flex",{attrs:{xs12:""}},[t.displayedShops.length>0?n("v-expansion-panel",t._l(t.displayedShops,function(e,r){return n("v-expansion-panel-content",{key:r},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h2",[t._v(t._s(e.name))])]),n("v-card",[n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs4:""}},[n("h3",[t._v("Adresse:")]),n("span",[t._v(t._s(e.address))]),n("h3",[t._v("Prix:")]),n("span",[t._v(t._s(e.price)+" €")]),n("h3",[t._v("Distance:")]),n("span",[t._v(t._s(t.distanceInKmBetweenEarthCoordinates(t.latPolytech,t.lonPolytech,e.lat,e.lon))+"Km")])]),n("v-flex",{attrs:{xs8:""}},[n("app-store-map",{staticStyle:{border:"solid"},attrs:{lat:e.lat,lon:e.lon}})],1)],1)],1)],1)],1)}),1):t._e(),0===t.shops.length?n("h5",[t._v("Non renseigné...")]):t._e()],1)],1)],1)],1)},vt=[],mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GmapMap",{staticStyle:{width:"100%",height:"400px"},attrs:{center:{lat:parseFloat(this.lat),lng:parseFloat(this.lon)},zoom:15,"map-type-id":"terrain"}})},_t=[],gt=r["default"].component("app-store-map",{props:["lat","lon"],data:function(){return{}},watch:{},methods:{},mounted:function(){}}),xt=gt,bt=Object(f["a"])(xt,mt,_t,!1,null,null,null),yt=bt.exports,wt=r["default"].component("app-shops",{components:{StoresMap:yt},props:["shops"],data:function(){return{displayMap:!1,distance:0,price:0,name:"",shopName:"",latPolytech:43.615807,lonPolytech:7.073046,displayedShops:[]}},watch:{shops:function(t,e){t!==e&&(this.displayedShops=t,this.distance=0,this.price=0,this.name="")}},mounted:function(){},methods:{displayOnMap:function(t,e){this.$root.$emit("update-coordinates",{lat:t,lon:e}),this.displayMap=!0},degreesToRadians:function(t){return t*Math.PI/180},distanceInKmBetweenEarthCoordinates:function(t,e,n,r){var i=6371,a=this.degreesToRadians(n-t),s=this.degreesToRadians(r-e);t=this.degreesToRadians(t),n=this.degreesToRadians(n);var o=Math.sin(a/2)*Math.sin(a/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(t)*Math.cos(n),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return Math.round(i*l)},filterByDistance:function(t,e){var n=this,r=[];t.forEach(function(t){var i=n.distanceInKmBetweenEarthCoordinates(n.latPolytech,n.lonPolytech,t.lat,t.lon);i<=e&&r.push(t)}),this.displayedShops=r},filterByPrice:function(t,e){var n=[];t.forEach(function(t){t.price<=e&&n.push(t)}),this.displayedShops=n},filterByName:function(t){if(""!==t){var e=[];this.shops.forEach(function(n){n.name.toLowerCase().includes(t.toLowerCase())&&e.push(n)}),this.displayedShops=e}else this.displayedShops=this.shops}}}),kt=wt,St=(n("ec48"),Object(f["a"])(kt,ft,vt,!1,null,null,null)),jt=St.exports,Ft=function t(e){Object(et["a"])(this,t),this.name=e},Ct=function t(e,n,r,i,a){Object(et["a"])(this,t),this.name=e,this.address=n,this.lat=r,this.lon=i,this.price=a},Pt=r["default"].extend({components:{Nutriments:H,Additives:tt,AddPrice:ht,Shops:jt},data:function(){return{product:null,id:""}},mounted:function(){var t=this;this.id=this.$route.params.id,this.getAliment(),this.$root.$on("price-added-event",function(){return t.getAliment()})},computed:{paramsId:function(){return this.$route.params.id}},methods:{getAliment:function(){var t=this;fetch("".concat("https://web-server-client.herokuapp.com","/ingredients/").concat(this.id)).then(function(t){return t.json()}).then(function(e){var n=t.extractNutriments(e[0].nutriments),r=t.extractAdditives(e[0]),i=t.extractShops(e[0]);t.product=new it(e[0].product_name,n,e[0].ingredients_text,r,i)})},extractNutriments:function(t){var e=[],n=[];for(var r in t){var i=r,a=(t[r],i.split("_")[0]);n.includes(a)||n.push(a)}for(var s=0;s<n.length;s++){var o=n[s],l=o+"_unit",c=o+"_100g",u=""===t[l]||void 0===t[l]?"g":t[l],d=new rt(o,t[c],u);e.push(d)}return e},extractIngredients:function(t){var e=[];return t.ingredients.forEach(function(t){e.push(new Ft(t.text))}),e},extractAdditives:function(t){var e=[];return t.additives_tags.forEach(function(t){e.push(t.split(":")[1])}),e},extractShops:function(t){var e=[];return t.shops?(t.shops.forEach(function(t){var n=new Ct(t.name,t.address,t.latitude,t.longitude,t.price);e.push(n)}),e):e}},watch:{paramsId:function(t,e){t!==e&&(this.id=this.paramsId,this.getAliment())}}}),Et=Pt,Ot=Object(f["a"])(Et,q,U,!1,null,null,null),$t=Ot.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("Coucou")])},At=[],Nt=r["default"].extend({}),Mt=Nt,Tt=Object(f["a"])(Mt,Bt,At,!1,null,null,null),Lt=Tt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"recipe"}},[n("router-view")],1)},It=[],Rt=r["default"].extend({}),qt=Rt,Ut=Object(f["a"])(qt,Dt,It,!1,null,null,null),zt=Ut.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("Ajout recette")])},Vt=[],Jt=r["default"].extend({}),Gt=Jt,Ht=Object(f["a"])(Gt,Kt,Vt,!1,null,null,null),Wt=Ht.exports;r["default"].use(A["a"]);var Yt=new A["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:R,children:[{path:"details/:id",name:"details",component:$t}]},{path:"/recipe",name:"Recipe",component:zt,children:[{path:"details/:id",name:"recipedetails",component:Lt},{path:"newrecipe",name:"newrecipe",component:Wt}]}]}),Zt=n("2f62");r["default"].use(Zt["a"]);var Qt=new Zt["a"].Store({state:{},mutations:{},actions:{}}),Xt=n("ce5b"),te=n.n(Xt),ee=(n("bf40"),n("755e"));r["default"].use(ee,{load:{key:"AIzaSyD_Sy6qB2NgrYZSPUnP0yWpyt2x87HTw-w"}}),r["default"].use(te.a),r["default"].config.productionTip=!1,new r["default"]({router:Yt,store:Qt,render:function(t){return t(B)}}).$mount("#app")},ec48:function(t,e,n){"use strict";var r=n("008e"),i=n.n(r);i.a}});
//# sourceMappingURL=app.b57eddb7.js.map