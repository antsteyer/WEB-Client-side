(function(e){function t(t){for(var r,s,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],i[s]&&p.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"008e":function(e,t,n){},"034f":function(e,t,n){"use strict";var r=n("64a9"),i=n.n(r);i.a},"059d":function(e,t,n){"use strict";var r=n("a1cc"),i=n.n(r);i.a},"06a4":function(e,t,n){},"1da8":function(e,t,n){},"48de":function(e,t,n){"use strict";var r=n("1da8"),i=n.n(r);i.a},"5c37":function(e,t,n){},"62a04":function(e,t,n){"use strict";var r=n("bcfe"),i=n.n(r);i.a},"64a9":function(e,t,n){},a1cc:function(e,t,n){},bcfe:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("v-navigation-drawer",{attrs:{app:"",clipped:""}},[n("data-list",{directives:[{name:"show",rawName:"v-show",value:e.routePath.includes("home"),expression:"routePath.includes('home')"}]}),n("recipe-list",{directives:[{name:"show",rawName:"v-show",value:e.routePath.includes("recipe"),expression:"routePath.includes('recipe')"}]})],1),n("v-toolbar",{attrs:{app:"","clipped-left":""}},[n("v-toolbar-side-icon",[n("v-icon",[e._v("fastfood")])],1),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",to:"/home"}},[e._v("Accueil")]),n("v-btn",{attrs:{flat:"",to:"/recipe"}},[e._v("Recettes")])],1)],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1)],1)],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.aliments.length>0?n("v-layout",{attrs:{column:"","align-center":"","justify-start":"","fill-height":""}},[n("list-filters",{on:{filterListByText:e.onFilterByText,filterListByScore:e.onFilterByScore}}),e.alimentsFiltered.length>0?n("v-list",{attrs:{"two-line":""}},[e._l(e.alimentsFromPage,function(t,r){return[t?n("v-list-tile",{key:r+"tile",class:{activeItem:e.itemSelected&&e.itemSelected===t.id},on:{click:function(n){e.itemClicked(t)}}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.name))]),n("v-list-tile-sub-title",[n("v-chip",[n("v-avatar",{staticClass:"white--text",attrs:{color:e.getColorFromScore(t.score)}},[e._v(e._s(e.getLetterFromScore(t.score)))]),e._v("\n              "+e._s(t.score)+"\n            ")],1)],1)],1)],1):e._e(),t&&r<e.alimentsFiltered.length-1?n("v-divider",{key:r}):e._e()]})],2):n("span",[e._v("Aucun résultat")]),e.alimentsFiltered.length>0&&e.pageCount>1?n("v-pagination",{attrs:{circle:"",length:e.pageCount,"total-visible":5},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()],1):n("v-layout",{attrs:{row:"","align-center":"","fill-height":"","justify-center":""}},[n("v-progress-circular",{staticClass:"progress",attrs:{indeterminate:"",color:"primary"}})],1)},o=[],l=(n("6762"),n("2fdb"),n("7f7f"),n("59ad")),c=n.n(l),u=(n("55dd"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-text-field",{attrs:{"hide-details":"",placeholder:"Filtrer la liste..."},on:{input:e.onUserSearch},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e.filterByScore?n("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[n("v-btn-toggle",{attrs:{dark:"",mandatory:""},model:{value:e.scoreToShow,callback:function(t){e.scoreToShow=t},expression:"scoreToShow"}},[n("v-tooltip",{attrs:{bottom:""}},[n("v-btn",{attrs:{slot:"activator",icon:"",dark:"",color:"grey"},slot:"activator"},[e._v("#")]),n("span",[e._v("Afficher tous")])],1),n("v-btn",{attrs:{icon:"",dark:"",color:"green"}},[e._v("A")]),n("v-btn",{attrs:{icon:"",dark:"",color:"#90EE90"}},[e._v("B")]),n("v-btn",{attrs:{icon:"",dark:"",color:"yellow"}},[e._v("C")]),n("v-btn",{attrs:{icon:"",dark:"",color:"orange"}},[e._v("D")]),n("v-btn",{attrs:{icon:"",dark:"",color:"red"}},[e._v("E")])],1)],1):e._e()],1)}),d=[],p=r["default"].extend({props:{filterByScore:{type:Boolean,default:!0}},data:function(){return{search:null,scoreToShow:0}},methods:{onUserSearch:function(e){this.$emit("filterListByText",e)}},watch:{scoreToShow:function(e){this.$emit("filterListByScore",e)}}}),h=p,f=(n("62a04"),n("2877")),m=Object(f["a"])(h,u,d,!1,null,"4b0463ee",null),v=m.exports,g=9,_=r["default"].extend({data:function(){return{aliments:[],itemSelected:null,alimentsFiltered:[],page:1}},components:{ListFilters:v},mounted:function(){this.getData()},computed:{alimentsFromPage:function(){var e=(this.page-1)*g,t=e+g;return this.alimentsFiltered.slice(e,t)},pageCount:function(){var e=this.alimentsFiltered.length,t=g;return Math.ceil(e/t)}},methods:{getData:function(){var e=this;fetch("https://web-server-client.herokuapp.com/score").then(function(e){return e.json()}).then(function(t){e.aliments=t.sort(function(e,t){var n=c()(e.score),r=c()(t.score);return n>r?1:n<r?-1:0}),e.alimentsFiltered=e.aliments})},getColorFromScore:function(e){var t=c()(e);return t<=1?"green":t>1&&t<=4?"#90EE90":t>4&&t<=6?"yellow":t>6&&t<=7?"orange":"red"},getLetterFromScore:function(e){var t=c()(e);return t<=1?"A":t>1&&t<=4?"B":t>4&&t<=6?"C":t>6&&t<=7?"D":"E"},itemClicked:function(e){this.itemSelected=e.id,this.$router.push({path:"/home/details/".concat(e.id)})},onFilterByText:function(e){this.alimentsFiltered=this.aliments.filter(function(t){return t.name&&t.name.includes(e)})},onFilterByScore:function(e){var t=this;if(0!==e){var n="";switch(e){case 1:n="A";break;case 2:n="B";break;case 3:n="C";break;case 4:n="D";break;case 5:n="E";break;default:n="A";break}this.alimentsFiltered=this.aliments.filter(function(e){return t.getLetterFromScore(e.score)===n})}else this.alimentsFiltered=this.aliments}}}),b=_,x=(n("059d"),Object(f["a"])(b,s,o,!1,null,"4c5b80ac",null)),y=x.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("v-layout",{attrs:{row:"","align-center":"","fill-height":"","justify-center":""}},[n("v-progress-circular",{staticClass:"progress",attrs:{indeterminate:"",color:"primary"}})],1):n("v-layout",{attrs:{column:"","align-center":"","justify-start":"","fill-height":""}},[n("list-filters",{attrs:{filterByScore:!1},on:{filterListByText:e.onFilterByText}}),e.recipesFiltered.length>0?n("v-list",{attrs:{"two-line":""}},[e._l(e.recipesFromPage,function(t,r){return[t?n("v-list-tile",{key:r+"tile",class:{activeItem:e.itemSelected&&e.itemSelected===t._id},on:{click:function(n){e.itemClicked(t)}}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.name))])],1)],1):e._e(),t&&r<e.recipesFiltered.length-1?n("v-divider",{key:r}):e._e()]})],2):n("span",{staticClass:"noResult"},[e._v("Aucun résultat")]),e.recipesFiltered.length>0&&e.pageCount>1?n("v-pagination",{attrs:{circle:"",length:e.pageCount,"total-visible":5},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e(),n("v-spacer"),n("v-btn",{attrs:{to:"/recipe/newrecipe",flat:"",color:"primary"}},[e._v("Ajouter une nouvelle recette")])],1)},k=[],j=9,S=r["default"].extend({data:function(){return{loading:!1,recipes:[],itemSelected:null,recipesFiltered:[],page:1}},components:{ListFilters:v},mounted:function(){this.getData()},computed:{recipesFromPage:function(){var e=(this.page-1)*j,t=e+j;return this.recipesFiltered.slice(e,t)},pageCount:function(){var e=this.recipesFiltered.length,t=j;return Math.ceil(e/t)}},methods:{getData:function(){var e=this;this.loading=!0,fetch("https://web-server-client.herokuapp.com/getrecipes").then(function(e){return e.json()}).then(function(t){e.recipes=t.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}),e.recipesFiltered=e.recipes,e.loading=!1})},itemClicked:function(e){this.itemSelected=e._id,this.$router.push({path:"/recipe/details/".concat(e._id)})},onFilterByText:function(e){this.recipesFiltered=this.recipes.filter(function(t){return t.name&&t.name.toLowerCase().includes(e.toLowerCase())})}}}),C=S,P=(n("e3cf"),Object(f["a"])(C,w,k,!1,null,"4ba31a0c",null)),F=P.exports,O=r["default"].extend({components:{DataList:y,RecipeList:F},computed:{routePath:function(){return this.$route.path}}}),$=O,R=(n("034f"),Object(f["a"])($,i,a,!1,null,null,null)),E=R.exports,L=n("8c4f"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("router-view")],1)},I=[],A=n("60a3"),B=A["a"].extend({components:{DataList:y}}),N=B,D=Object(f["a"])(N,T,I,!1,null,null,null),M=D.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.product?n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{dark:"",color:"primary"}},[n("v-card-text",{staticClass:"px-0"},[n("h1",[e._v(e._s(e.product.name))])])],1)],1),n("v-flex",{attrs:{xs6:""}},[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[e._v("Ingredients")])]),n("v-divider"),n("v-card-text",[""!==e.product.ingredients?n("p",[e._v(e._s(e.product.ingredients))]):e._e(),e.product.ingredients?e._e():n("h5",[e._v("Non renseigné...")])])],1)],1),n("v-flex",{attrs:{xs3:""}},[n("app-nutriments",{attrs:{nutriments:e.product.nutriments}})],1),n("v-flex",{attrs:{xs3:""}},[n("app-additives",{attrs:{additives:e.product.additives}})],1),n("v-flex",{attrs:{xs5:""}},[n("app-add-price",{attrs:{id:e.id}})],1),n("v-flex",{attrs:{xs7:""}},[n("app-shops",{attrs:{shops:e.product.shops}})],1)],1)],1):e._e()},U=[],z=(n("ac6a"),n("28a5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[e._v(e._s(e.nutriments.length)+" "+e._s(1===e.nutriments.length?"Nutriment":"Nutriments"))])]),n("v-divider"),n("v-card-text",[e.nutriments.length>0?n("v-list",{attrs:{dense:""}},[e._l(e.nutriments,function(t,r){return[n("v-list-tile",{key:r},[n("v-list-tile-content",[e._v(e._s(t.getName()))]),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.getValueFor100g())+" "+e._s(t.unit))])],1)]})],2):e._e(),0===e.nutriments.length?n("h5",[e._v("Non renseigné...")]):e._e()],1)],1)}),V=[],W=r["default"].component("app-nutriments",{props:["nutriments"],data:function(){return{}},mounted:function(){},computed:{},methods:{}}),K=W,J=Object(f["a"])(K,z,V,!1,null,null,null),G=J.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"additives-card"},[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[e._v("Liste des additifs")])]),n("v-divider"),n("v-card-text",[e._l(e.additives,function(t,r){return[n("v-chip",{key:r,attrs:{color:"rgba(200, 201, 233, 0.75)","text-color":"black",disabled:"",outline:""}},[e._v(e._s(e._f("capitalize")(t)))])]}),0===e.additives.length?n("h5",[e._v("Non renseigné...")]):e._e()],2)],1)},Y=[],Z=(n("6b54"),r["default"].component("app-additives",{props:["additives"],data:function(){return{}},mounted:function(){},computed:{},methods:{},filters:{capitalize:function(e){return e?(e=e.toString(),e.toUpperCase()):""}}})),Q=Z,X=Object(f["a"])(Q,H,Y,!1,null,null,null),ee=X.exports,te=n("d225"),ne=n("b0b4"),re=function(){function e(t,n,r){Object(te["a"])(this,e),this.name=t,this.value_for_100g=n,this.unit=r}return Object(ne["a"])(e,[{key:"getName",value:function(){var e="",t=this.name.split("-");return t.forEach(function(t){e+=t+" "}),e.charAt(0).toUpperCase()+e.substring(1,e.length)}},{key:"getValueFor100g",value:function(){return Math.round(100*this.value_for_100g)/100}},{key:"getUnit",value:function(){return this.unit}}]),e}(),ie=function(){function e(t,n,r,i,a){Object(te["a"])(this,e),this.name=t,this.nutriments=n,this.ingredients=r,this.additives=i,this.shops=a}return Object(ne["a"])(e,[{key:"getName",value:function(){return this.name}},{key:"getNutriments",value:function(){return this.nutriments}}]),e}(),ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[e._v("Donner un prix pour ce produit")])]),n("v-divider"),n("v-card-text",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",[n("v-layout",{attrs:{"align-center":"","justify-center":"",column:"","fill-height":""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:e.shop_name_rules,label:"Nom du magasin","single-line":"",outline:""},model:{value:e.shop_name,callback:function(t){e.shop_name=t},expression:"shop_name"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:e.shop_address_rules,label:"Addresse","single-line":"",outline:""},model:{value:e.shop_address,callback:function(t){e.shop_address=t},expression:"shop_address"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:e.shop_lat_rules,label:"Latitude","single-line":"",outline:"",type:"number"},model:{value:e.shop_lat,callback:function(t){e.shop_lat=t},expression:"shop_lat"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:e.shop_lon_rules,label:"Longitude","single-line":"",outline:"",type:"number"},model:{value:e.shop_lon,callback:function(t){e.shop_lon=t},expression:"shop_lon"}})],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{attrs:{rules:e.price_rules,label:"Prix","single-line":"",outline:"",type:"number"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1)],1),n("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[n("v-btn",{attrs:{color:"error"},on:{click:e.reset}},[e._v("Réinitialiser")]),n("v-btn",{attrs:{disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("Valider")])],1)],1)],1),n("v-snackbar",{attrs:{color:"success",timeout:3e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("Votre prix a bien été pris en compte !\n      "),n("v-btn",{attrs:{dark:"",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v("Fermer")])],1)],1)],1)},se=[],oe=n("f499"),le=n.n(oe),ce=(n("96cf"),n("3b8d")),ue=r["default"].component("app-add-price",{props:["id"],watch:{id:function(e,t){}},data:function(){return{valid:!0,shop_name:"",shop_name_rules:[function(e){return!!e||"Nom du magasin requis"}],shop_address:"",shop_address_rules:[function(e){return!!e||"Addresse requise"}],shop_lat:"",shop_lat_rules:[function(e){return!!e||"Latitude requise"}],shop_lon:"",shop_lon_rules:[function(e){return!!e||"Longitude requise"}],price:"",price_rules:[function(e){return!!e||"Prix requis"},function(e){return e&&e>0||"Le prix ne peux pas etre negatif"}],snackbar:!1}},mounted:function(){},computed:{},methods:{validate:function(){this.$refs.form.validate()?this.sendFormData():console.log("Not valid!")},reset:function(){this.$refs.form.reset()},sendFormData:function(){var e=Object(ce["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://web-server-client.herokuapp.com/addPrice",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:le()({id:this.id,shop:{name:this.shop_name,address:this.shop_address,longitude:this.shop_lon,latitude:this.shop_lat,price:this.price}})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,!0===n?(this.snackbar=!0,this.reset(),this.$root.$emit("price-added-event")):console.log("Something went wrong");case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),isNumber:function(e){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)}}}),de=ue,pe=Object(f["a"])(de,ae,se,!1,null,null,null),he=pe.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("h2",[e._v("Liste des magasins qui vendent ce produit")])]),n("v-divider"),n("v-card-text",[n("v-layout",{attrs:{row:"",wrap:""}},[e.shops.length>0?n("div",{staticClass:"filters"},[n("v-layout",{attrs:{"justify-start":"",column:"","fill-height":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Nom du magasin",placeholder:"Entrer le nom d'un magasin",outline:""},on:{input:e.filterByName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-slider",{attrs:{max:100,label:"Distance (km)","thumb-label":""},on:{change:function(t){e.filterByDistance(e.shops,e.distance)}},model:{value:e.distance,callback:function(t){e.distance=t},expression:"distance"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-slider",{attrs:{max:100,label:"Prix (€)","thumb-label":""},on:{change:function(t){e.filterByPrice(e.shops,e.price)}},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1)],1)],1):e._e(),n("v-flex",{attrs:{xs12:""}},[e.displayedShops.length>0?n("v-expansion-panel",e._l(e.displayedShops,function(t,r){return n("v-expansion-panel-content",{key:r},[n("div",{attrs:{slot:"header"},slot:"header"},[n("h2",[e._v(e._s(t.name))])]),n("v-card",[n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs4:""}},[n("h3",[e._v("Adresse:")]),n("span",[e._v(e._s(t.address))]),n("h3",[e._v("Prix:")]),n("span",[e._v(e._s(t.price)+" €")]),n("h3",[e._v("Distance:")]),n("span",[e._v(e._s(e.distanceInKmBetweenEarthCoordinates(e.latPolytech,e.lonPolytech,t.lat,t.lon))+"Km")])]),n("v-flex",{attrs:{xs8:""}},[n("app-store-map",{staticStyle:{border:"solid"},attrs:{lat:t.lat,lon:t.lon}})],1)],1)],1)],1)],1)}),1):e._e(),0===e.shops.length?n("h5",[e._v("Non renseigné...")]):e._e()],1)],1)],1)],1)},me=[],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GmapMap",{staticStyle:{width:"100%",height:"400px"},attrs:{center:{lat:parseFloat(this.lat),lng:parseFloat(this.lon)},zoom:15,"map-type-id":"terrain"}})},ge=[],_e=r["default"].component("app-store-map",{props:["lat","lon"],data:function(){return{}},watch:{},methods:{},mounted:function(){}}),be=_e,xe=Object(f["a"])(be,ve,ge,!1,null,null,null),ye=xe.exports,we=r["default"].component("app-shops",{components:{StoresMap:ye},props:["shops"],data:function(){return{displayMap:!1,distance:0,price:0,name:"",shopName:"",latPolytech:43.615807,lonPolytech:7.073046,displayedShops:[]}},watch:{shops:function(e,t){e!==t&&(this.displayedShops=e,this.distance=0,this.price=0,this.name="")}},mounted:function(){},methods:{displayOnMap:function(e,t){this.$root.$emit("update-coordinates",{lat:e,lon:t}),this.displayMap=!0},degreesToRadians:function(e){return e*Math.PI/180},distanceInKmBetweenEarthCoordinates:function(e,t,n,r){var i=6371,a=this.degreesToRadians(n-e),s=this.degreesToRadians(r-t);e=this.degreesToRadians(e),n=this.degreesToRadians(n);var o=Math.sin(a/2)*Math.sin(a/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(e)*Math.cos(n),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return Math.round(i*l)},filterByDistance:function(e,t){var n=this,r=[];e.forEach(function(e){var i=n.distanceInKmBetweenEarthCoordinates(n.latPolytech,n.lonPolytech,e.lat,e.lon);i<=t&&r.push(e)}),this.displayedShops=r},filterByPrice:function(e,t){var n=[];e.forEach(function(e){e.price<=t&&n.push(e)}),this.displayedShops=n},filterByName:function(e){if(""!==e){var t=[];this.shops.forEach(function(n){n.name.toLowerCase().includes(e.toLowerCase())&&t.push(n)}),this.displayedShops=t}else this.displayedShops=this.shops}}}),ke=we,je=(n("ec48"),Object(f["a"])(ke,fe,me,!1,null,null,null)),Se=je.exports,Ce=function e(t){Object(te["a"])(this,e),this.name=t},Pe=function e(t,n,r,i,a){Object(te["a"])(this,e),this.name=t,this.address=n,this.lat=r,this.lon=i,this.price=a},Fe=r["default"].extend({components:{Nutriments:G,Additives:ee,AddPrice:he,Shops:Se},data:function(){return{product:null,id:""}},mounted:function(){var e=this;this.id=this.$route.params.id,this.getAliment(),this.$root.$on("price-added-event",function(){return e.getAliment()})},computed:{paramsId:function(){return this.$route.params.id}},methods:{getAliment:function(){var e=this;fetch("".concat("https://web-server-client.herokuapp.com","/ingredients/").concat(this.id)).then(function(e){return e.json()}).then(function(t){var n=e.extractNutriments(t[0].nutriments),r=e.extractAdditives(t[0]),i=e.extractShops(t[0]);e.product=new ie(t[0].product_name,n,t[0].ingredients_text,r,i)})},extractNutriments:function(e){var t=[],n=[];for(var r in e){var i=r,a=(e[r],i.split("_")[0]);n.includes(a)||n.push(a)}for(var s=0;s<n.length;s++){var o=n[s],l=o+"_unit",c=o+"_100g",u=""===e[l]||void 0===e[l]?"g":e[l],d=new re(o,e[c],u);t.push(d)}return t},extractIngredients:function(e){var t=[];return e.ingredients.forEach(function(e){t.push(new Ce(e.text))}),t},extractAdditives:function(e){var t=[];return e.additives_tags.forEach(function(e){t.push(e.split(":")[1])}),t},extractShops:function(e){var t=[];return e.shops?(e.shops.forEach(function(e){var n=new Pe(e.name,e.address,e.latitude,e.longitude,e.price);t.push(n)}),t):t}},watch:{paramsId:function(e,t){e!==t&&(this.id=this.paramsId,this.getAliment())}}}),Oe=Fe,$e=Object(f["a"])(Oe,q,U,!1,null,null,null),Re=$e.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[e.recipe?n("v-card",[n("v-img",{attrs:{src:e.recipe.image,alt:"img","aspect-ratio":"2.75"}}),n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[e._v(e._s(e.recipe.name))])])]),n("v-card-text",[n("h2",[e._v("Description de la recette:")]),n("p",[e._v(e._s(e.recipe.description))]),n("h2",[e._v("Preparation:")]),n("p",[e._v(e._s(e.recipe.preparation))]),n("h2",[e._v("Ingredients:")]),n("ul",e._l(e.recipe.ingredients,function(t,r){return n("li",{key:r},[n("a",{on:{click:function(n){n.stopPropagation(),e.openDialogWithIngredients(t)}}},[e._v(e._s(t))])])}),0),n("h2",[e._v("Commentaires:")]),e._l(e.recipe.comments,function(t,r){return n("v-list",{key:r,attrs:{"two-line":""}},[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",[e._v("Commentaire "+e._s(r+1))]),n("v-list-tile-sub-title",[e._v(e._s(t))])],1)],1)],1)}),n("v-textarea",{attrs:{outline:"",name:"input-7-4",label:"Votre commentaire"},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),n("v-btn",{attrs:{color:"success"},on:{click:e.postComment}},[e._v("Post")])],2)],1):e._e(),e.loading?n("v-layout",{staticStyle:{height:"800px"},attrs:{row:"","align-center":"","justify-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e()],1),n("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(e._s(e.selectedIngredient))]),n("v-card-text",[n("h3",[e._v("Liste des produits contenant cet ingrédient")]),e.loadProducts?n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e(),!e.loadProducts&&e.productList.length>0?n("v-list",[e._l(e.productList,function(t,r){return[n("v-list-tile",{key:r,on:{click:function(n){e.goToProductDetails(t.id)}}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.name))])],1)],1)]})],2):e._e(),e.loadProducts||0!==e.productList.length?e._e():n("span",[e._v("Pas de produits associés à cet ingrédient")])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v("Fermer")])],1)],1)],1)],1)},Le=[],Te=r["default"].extend({data:function(){return{loading:!1,id:"",recipe:null,noImgUrl:"http://www.djerba-troc.com/wp-content/uploads/no-image.png",comment:"",dialog:!1,selectedIngredient:"",loadProducts:!1,productList:[]}},computed:{paramsId:function(){return this.$route.params.id}},mounted:function(){this.id=this.paramsId,this.getRecipe()},methods:{getRecipe:function(){var e=Object(ce["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,fetch("".concat("https://web-server-client.herokuapp.com","/getRecipe"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:le()({id:this.id})}).then(function(e){return e.json()}).then(function(e){t.loading=!1,t.recipe=e});case 3:this.loading=!1;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),postComment:function(){var e=Object(ce["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.recipe){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://web-server-client.herokuapp.com/addComments",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:le()({id:this.recipe._id,comment:this.comment})});case 4:return t=e.sent,e.next=7,t.json();case 7:e.sent,this.getRecipe(),this.comment="";case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),openDialogWithIngredients:function(e){this.selectedIngredient=e,this.dialog=!0,this.getProductWithIngredient(e.toLowerCase())},getProductWithIngredient:function(e){var t=this;this.loadProducts=!0,fetch("https://web-server-client.herokuapp.com/ingredients",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:le()({ingredients:[e],additives_tags:[]})}).then(function(e){return e.json()}).then(function(e){t.productList=[],e.forEach(function(e){t.productList.push({name:e.product_name,id:e.id})}),t.loadProducts=!1})},goToProductDetails:function(e){this.dialog=!1,this.$router.push({path:"/home/details/".concat(e)})}},watch:{paramsId:function(e,t){e!==t&&(this.id=this.paramsId,this.recipe=null,this.getRecipe())}}}),Ie=Te,Ae=(n("dcb7"),Object(f["a"])(Ie,Ee,Le,!1,null,"272e5cd4",null)),Be=Ae.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"recipe"}},[n("router-view")],1)},De=[],Me=r["default"].extend({}),qe=Me,Ue=Object(f["a"])(qe,Ne,De,!1,null,null,null),ze=Ue.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("add-recipe-form")},We=[],Ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("h2",[e._v("Création de recette")]),n("v-text-field",{staticClass:"formItem",attrs:{outline:"",counter:30,rules:e.nameRules,label:"Nom de la recette",placeholder:"Ma recette",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-textarea",{staticClass:"formItem",attrs:{outline:"",placeholder:"Une magnifique recette","auto-grow":"",rules:e.descriptionRules,label:"Description",rows:"2",required:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),n("v-text-field",{staticClass:"formItem",attrs:{outline:"",rules:e.imageRules,label:"Url vers une image de la recette",required:""},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}}),n("v-textarea",{staticClass:"formItem",attrs:{outline:"","auto-grow":"",rules:e.preparationRules,label:"Étapes de préparation",placeholder:"1. Casser un oeuf",rows:"4",required:""},model:{value:e.preparation,callback:function(t){e.preparation=t},expression:"preparation"}}),n("v-combobox",{staticClass:"formItem",attrs:{outline:"",label:"Liste des ingrédients",rules:e.ingredientsRules,multiple:"",chips:"","deletable-chips":""},model:{value:e.ingredients,callback:function(t){e.ingredients=t},expression:"ingredients"}}),n("v-btn",{attrs:{disabled:!e.valid,color:"success",loading:e.loading},on:{click:e.validate}},[e._v("Créer")]),n("v-btn",{attrs:{color:"error"},on:{click:e.reset}},[e._v("Réinitialiser")]),n("v-alert",{attrs:{type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("Erreur lors de la création de la recette")])],1)},Je=[],Ge={data:function(){return{valid:!0,loading:!1,error:!1,name:"",nameRules:[function(e){return!!e||"Nom requis"},function(e){return e&&e.length<=30||"Nom doit être plus court que 30 caractères"}],description:"",descriptionRules:[function(e){return!!e||"Description requise"},function(e){return e&&e.length>=20||"La description doit contenir au moins 20 caractères"}],image:"",imageRules:[function(e){return!!e||"Image requise"}],preparation:"",preparationRules:[function(e){return!!e||"Préparation requise"},function(e){return e&&e.length>=20||"La préparation doit contenir au moins 20 caractères"}],ingredients:null,ingredientsRules:[function(e){return!!e||"Au moins un ingrédient requis"}],checkbox:!1}},methods:{validate:function(){var e=Object(ce["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.form.validate()){e.next=8;break}return this.snackbar=!0,this.loading=!0,e.next=5,fetch("https://web-server-client.herokuapp.com/createRecipe",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:le()({name:this.name,description:this.description,image:this.image,preparation:this.preparation,ingredients:this.ingredients})}).catch(function(e){console.log("error",e),t.error=!0});case 5:e.sent,this.loading=!1,this.error||this.$router.push({path:"/recipe"});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),reset:function(){this.$refs.form.reset()}}},He=Ge,Ye=(n("48de"),Object(f["a"])(He,Ke,Je,!1,null,"433130d8",null)),Ze=Ye.exports,Qe=r["default"].extend({components:{AddRecipeForm:Ze}}),Xe=Qe,et=Object(f["a"])(Xe,Ve,We,!1,null,null,null),tt=et.exports;r["default"].use(L["a"]);var nt=new L["a"]({routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:M,children:[{path:"details/:id",name:"details",component:Re}]},{path:"/recipe",name:"Recipe",component:ze,children:[{path:"details/:id",name:"recipedetails",component:Be},{path:"newrecipe",name:"newrecipe",component:tt}]}]}),rt=n("2f62");r["default"].use(rt["a"]);var it=new rt["a"].Store({state:{},mutations:{},actions:{}}),at=n("ce5b"),st=n.n(at),ot=(n("bf40"),n("755e"));r["default"].use(ot,{load:{key:"AIzaSyD_Sy6qB2NgrYZSPUnP0yWpyt2x87HTw-w"}}),r["default"].use(st.a),r["default"].config.productionTip=!1,new r["default"]({router:nt,store:it,render:function(e){return e(E)}}).$mount("#app")},dcb7:function(e,t,n){"use strict";var r=n("06a4"),i=n.n(r);i.a},e3cf:function(e,t,n){"use strict";var r=n("5c37"),i=n.n(r);i.a},ec48:function(e,t,n){"use strict";var r=n("008e"),i=n.n(r);i.a}});
//# sourceMappingURL=app.afebabaf.js.map